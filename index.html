<!doctype html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Asteroids 3D</title>
    
        <script src='./cannon.js'></script>
    <script src='https://threejs.org/build/three.min.js'></script>
    <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
    <script src="https://threejs.org/examples/js/loaders/OBJLoader.js"></script>
	<script  src="https://threejs.org/examples/js/loaders/MTLLoader.js"></script>
</head>
<body>
    <script type='text/javascript'>
      var scene, camera, renderer;
init();
animate();
function initRenderer() {
  renderer = new THREE.WebGLRenderer();
  renderer.setSize ( window.innerWidth, window.innerHeight );
  document.body.appendChild( renderer.domElement );
}
function initCamera() {
  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 20000);
  camera.position.set(0, 100, 200);
  camera.lookAt(scene.position);
  cameraControls = new THREE.OrbitControls(camera, renderer.domElement);
  cameraControls.addEventListener("change", function() {
   camera.updateProjectionMatrix();
   render();
  });  
}
function initSkyBox(){
  var materialArray = [];
  materialArray.push(new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture('images/cwd_lf.jpg')
  }));
  materialArray.push(new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture('images/cwd_rt.jpg')
  }));
  materialArray.push(new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture('images/cwd_up.jpg')}));
  materialArray.push(new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture('images/cwd_dn.jpg')
}));
  materialArray.push(new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture('images/cwd_ft.jpg')
  }));
  materialArray.push(new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture('images/cwd_bk.jpg')
  }));
  for (var i = 0; i < 6; i++)
     materialArray[i].side = THREE.BackSide;
  var skyboxMaterial = new THREE.MeshFaceMaterial( materialArray );
  var skyboxGeom = new THREE.CubeGeometry( 5000, 5000, 5000, 1, 1, 1 );
  var skybox = new THREE.Mesh( skyboxGeom, skyboxMaterial );
  scene.add( skybox );  
}
function initScene() {
//   var material = new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture('images/crate.jpg') });
//   var geometry = new THREE.CubeGeometry(50, 50, 50);
//   var cube = new THREE.Mesh(geometry, material);
//   cube.position.set(0, 25, 0);
let material = new THREE.MeshStandardMaterial();
    let objLoader = new THREE.OBJLoader();
    let mtlLoader = new THREE.MTLLoader();

    mtlLoader.setPath('./assets/');
        mtlLoader.load(
        "ship.mtl",
        function (mtls){
          mtls.preload();
          objLoader.setMaterials(mtls);
          objLoader.setPath("./assets/");
          objLoader.load( 
            "ship.obj",
            function ( obj ) {
                obj.scale.set(0.1,0.1,0.1);
                camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 100, 1000);
                camera.position.set(0, 250, 750);
                // camera.lookAt(scene.position);
                // camera.add(obj);
                let pointLight = new THREE.PointLight( 0xffffff, 100000 );
                pointLight.position = (100, 105, 200);
                // obj.add(camera);
                // scene.add(obj);
                camera.add(obj);
                scene.add(camera);
                scene.add(pointLight);
                render();
            }
          );
        }
      );
}
function init() {
  scene = new THREE.Scene();
  initRenderer();
//   initCamera();
  initSkyBox();
  initScene();
}
function animate() {
  requestAnimationFrame(animate);
  render();
}
function update() {
}
function render() {
  renderer.render(scene, camera);
}
    </script>
</body>
  
</html>